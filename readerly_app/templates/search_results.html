<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Readerly</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
        integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
</head>

<body>
    <div id="container">

        <div class='row border-bottom m-3 d-flex justify-content-between'>
            <h1 class='col-8'>Search Results Page</h1>
            <a href='/go_back' class='col-2 h-50 btn btn-secondary'>Go Back</a>
            <a href='/logout' class='col-2 h-50 btn btn-secondary'>Log Out</a>
        </div>

        <div class="row m-3">
            
            <div class="col-8 d-flex flex-wrap">

                {% for book in request.session.results.items %}
                <div class = 'book col-lg-3 col-sm-6 border border-secondary justify-content-center p-2'>
                <h4>{{book.volumeInfo.title}}</h4>
                <p class = 'mb-0'>Written By:</p> 
                {% for author in book.volumeInfo.authors %}
                <p class = 'm-0'>{{author}}</p>
                {% endfor %}
                <img src = '{{book.volumeInfo.imageLinks.thumbnail}}' alt = "image" class = 'mt-3'>
                <p>{{book.volumeInfo.description}} <a href = {{book.volumeInfo.infoLink}}>Read More</a></p>
                <form action = '/add_book' method = 'POST'>
                    {% csrf_token %}
                    <input type = 'hidden' name = 'title' value = '{{book.volumeInfo.title}}'>
                    <input type = 'hidden' name = 'author' value = {{book.volumeInfo.authors}}>
                    <input type = 'hidden' name = 'image' value = {{book.volumeInfo.imageLinks.thumbnail}}>
                    <input type = 'hidden' name = 'desc' value = '{{book.volumeInfo.description}}'>
                    <input type = 'hidden' name = 'google_id' value = {{book.id}}>
                <input type = 'submit' class = 'btn btn-primary m-2' value = "Add to Favorites">
            </form>
            </div>
                {% endfor %}

            </div>

            <div class="col-4 border-left border-secondary">
                <form action="/search_books" method="post">
                    {% csrf_token %}
                    <div class="d-flex form-group">
                        <input name="search_books" placeholder="Search Readerly" type="text" class="form-control">
                        <button type="submit">GO</button>

                    </div>
                </form>

                <a href="/events">View Events Link</a>
            </div>
        </div>


    </div>
</body>

</html>